#include "aclocal.m4"

AC_SUBST(SHELL)
AC_SUBST(YACC)
AC_SUBST(ARCH)

dnl Process this file with autoconf to produce a configure script.
AC_INIT(include/dx/arch.h)
AM_CONFIG_HEADER(include/dxconfig.h)
AM_INIT_AUTOMAKE(dx, 1.0)

AC_DEFINE(DXD_VERSION_STRING,   "01.01.0001")
AC_DEFINE_UNQUOTED(DXD_VERSION, 4)
AC_DEFINE_UNQUOTED(DXD_RELEASE, 1)
AC_DEFINE_UNQUOTED(DXD_MODIFICATION, 1)

DX_ARCHITECTURE
DX_STREAM_O2

dnl Checks for programs.
AC_PROG_RANLIB
AC_PROG_CXX(-g)
AC_PROG_CC
AC_CHECK_HEADERS(fcntl.h limits.h malloc.h strings.h sys/file.h sys/ioctl.h sys/time.h unistd.h sys/types.h sys/sysconfig.h sys/un.h values.h )
AC_CHECK_FUNCS(getcwd gethostname gettimeofday mkdir mkfifo mktime putenv regcmp re_comp regcmp select socket strcspn strdup strerror strspn strstr strtod strtol strtoul uname popen vfork trunc)
AC_PROG_CPP
AC_PROG_YACC

dnl Checks for libraries.
AC_CHECK_LIB(g++, main)
AC_CHECK_LIB(dl, main)
AC_CHECK_LIB(netcdf, free_NC_attr)

AC_CHECK_LIB(cdf, main)
AC_CHECK_LIB(hdf, main)

dnl Checks for header files.
AC_PATH_X
AC_HEADER_DIRENT
AC_HEADER_STDC
AC_HEADER_SYS_WAIT
dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_MODE_T
AC_TYPE_PID_T
AC_TYPE_SIZE_T
AC_HEADER_TIME
AC_STRUCT_TM

DX_HEADER_HAS_SYMBOL(math.h, M_PI)
DX_HEADER_HAS_SYMBOL(math.h, M_SQRT2)
DX_HEADER_HAS_SYMBOL(sys/stat.h, S_ISDIR)
DX_HEADER_HAS_SYMBOL(sys/sysmp.h, sysmp)

dnl Checks for library functions.
AC_PROG_GCC_TRADITIONAL
AC_FUNC_MEMCMP
AC_FUNC_SETVBUF_REVERSED
AC_TYPE_SIGNAL
AC_FUNC_VFORK
AC_FUNC_VPRINTF
AC_FUNC_WAIT3


AC_CHECK_TYPE(byte, signed char)
AC_CHECK_TYPE(ubyte, unsigned char)
AC_CHECK_TYPE(short, signed short)
AC_CHECK_TYPE(ushort, unsigned short)
AC_CHECK_TYPE(ulong, unsigned long)

AC_CHECK_TYPE(int8, signed char)
AC_CHECK_TYPE(uint8, unsigned char)
AC_CHECK_TYPE(int16, signed short)
AC_CHECK_TYPE(uint16, unsigned short)
AC_CHECK_TYPE(int32, signed int)
AC_CHECK_TYPE(uint32, unsigned int)
AC_CHECK_TYPE(int64, signed long)
AC_CHECK_TYPE(uint64, unsigned long)

AC_CHECK_TYPE(float32, float)
AC_CHECK_TYPE(float64, double char)

AC_C_BIGENDIAN

AC_OUTPUT( bin/dx bin/Makefile src/ui++/ui/Makefile lib/Makefile src/exec/hwrender/gl/Makefile src/exec/hwrender/xgl/Makefile src/exec/hwrender/starbase/Makefile src/ui++/dxuilib/Makefile src/ui++/ui/Makefile src/exec/Makefile src/exec/dxexec/Makefile include/Makefile include/dx/Makefile src/exec/libdx/Makefile src/Makefile src/exec/dpexec/Makefile src/exec/dxmods/Makefile src/ui++/base/Makefile src/ui++/Makefile src/ui++/dxl/Makefile src/ui++/dxui/Makefile src/ui++/prompter/Makefile src/ui++/mb/Makefile src/ui++/widgets/Makefile src/ui++/startup/Makefile src/ui++/tutor/Makefile src/ui++/java/dx/protocol/server/Makefile src/ui++/java/dx/protocol/Makefile src/ui++/java/dx/Makefile src/ui++/java/dx/runtime/Makefile src/ui++/java/dx/client/Makefile src/ui++/java/dx/net/Makefile src/ui++/java/dx/applets/Makefile src/ui++/java/dx/server/Makefile src/ui++/java/Makefile src/exec/hwrender/opengl/Makefile src/exec/hwrender/Makefile Makefile help/Makefile html/Makefile man/catl/Makefile man/manl/Makefile man/Makefile fonts/Makefile doc/Makefile)
